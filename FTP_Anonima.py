
from ftplib import FTP
import mysql.connector as mysql


 
def conexionAnonymous(host):
	conexion = True
	usuario = "anonymous"
	clave = ""
	

	frase = "Falló la conexión!"
		

	try:
		tp = FTP(host, usuario, clave)
		#print("Conexión establecida!!!")
		conexion = False 
		#conexion = FTP(host)
		#conexion.login(usuario, clave)
		    

	except:
		#print("Falló la conexión!\n")
		conexion = True 


	if not conexion:
		frase = "Conexión establecida!!!"
		pass
	print ("\nip del servidor: "+ host)
	print ("Usuario: "+usuario+" + Contraseña: "+clave+" = " + str(not conexion)+" :: "+frase)


conexion = mysql.connect( host='localhost', user= 'root', passwd='', db='hackiar' )
operacion = conexion.cursor()
operacion.execute( "SELECT * FROM nmap WHERE servicio = 'ftp' ; " )
result_set = operacion.fetchall()

for row in result_set:
    conexionAnonymous(row[0])
